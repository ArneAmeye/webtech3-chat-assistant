class Message{constructor(){getAllMessages();const e=document.querySelector(".messages");document.querySelector("#myMessage"),document.querySelector(".btn--send");this.primus=Primus.connect("/",{reconnect:{max:1/0,min:500,retries:10}}),this.primus.on("data",function(s){if(console.log(s),s.message){let i=document.createElement("div");i.classList.add("messageWrapper","flex","flex--container"),i.dataset.id=s.id;let a=` \n                <div class="profile flex flex--container">\n                    <img class="profpic flex--item" src="https://fakeimg.pl/75x75/" alt="profPic">\n                    <h4 class="title title--name flex--item" data-user_id="${s.user_id}">${s.username}</h4>\n                </div>\n\n                <h3 class="message title title--message flex--item">${s.message}</h3>\n                <h5 class="message--time title title--time flex--item">Timestamp here</h5>\n\n                <div class="iconsWrap flex--item">\n                    <img class="icons icons--pen" src="../images/edit.svg" alt="penIcon">\n                    <img class="icons icons--trash" src="../images/delete.svg" alt="trashIcon">\n                </div>\n                `;i.innerHTML=a,e.appendChild(i);var t=document.querySelector(".messages");t.scrollTop=t.scrollHeight}})}}function getAllMessages(){fetch("/api/v1/messages",{method:"get",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:"Bearer"+localStorage.getItem("token")}}).then(e=>e.json()).then(e=>{if(console.log(e),"success"==e.status){for(i=0;i<e.data.length;i++){let s=document.createElement("div");s.classList.add("messageWrapper","flex","flex--container"),s.dataset.id=e.data[i]._id;let t=` \n                <div class="profile flex flex--container">\n                    <img class="profpic flex--item" src="https://fakeimg.pl/75x75/" alt="profPic">\n                    <h4 class="title title--name flex--item" data-user_id="${e.data[i].user_id}">${e.data[i].username}</h4>\n                </div>\n\n                <h3 class="message title title--message flex--item">${e.data[i].message}</h3>\n                <h5 class="message--time title title--time flex--item">Timestamp here</h5>\n\n                <div class="iconsWrap flex--item">\n                    <img class="icons icons--pen" src="../images/edit.svg" alt="penIcon">\n                    <img class="icons icons--trash" src="../images/delete.svg" alt="trashIcon">\n                </div>\n                `;s.innerHTML=t,document.querySelector(".messages").appendChild(s)}var s=document.querySelector(".messages");s.scrollTop=s.scrollHeight}})}let message=new Message;