window.addEventListener("load",getAllSkills());let saveSkill=document.querySelector(".skills").addEventListener("change",t=>{if(t.target.classList.contains("skill")){let e=t.target.getAttribute("data-skill");0==t.target.getAttribute("data-edited")?(console.log("save"),fetch("http://localhost:3000/users/profile/"+e,{method:"post",headers:{"Content-Type":"application/json",Autorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({userId:localStorage.getItem("user_id"),skill:e})}).then(t=>t.json()).then(e=>{console.log(e),t.target.setAttribute("data-edited",1)}).catch(t=>{console.log(t)})):(console.log("update"),fetch("http://localhost:3000/users/profile/"+e,{method:"delete",headers:{"Content-Type":"application/json",Autorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({userId:localStorage.getItem("user_id"),skill:e})}).then(t=>t.json()).then(e=>{console.log(e),t.target.setAttribute("data-edited",0)}).catch(t=>{console.log(t)}))}});function getAllSkills(){let t=localStorage.getItem("user_id");fetch("http://localhost:3000/users/profile/"+t,{method:"get",headers:{"Content-Type":"application/json",Authorization:"Bearer"+localStorage.getItem("token")}}).then(t=>t.json()).then(t=>{if("success"==t.status){let e=t.data.skills;for(let t=0;t<e.length;t++){let o=document.querySelector(`[data-skill='${e[t].skill}']`);o.checked=!0,o.setAttribute("data-edited",1)}}})}